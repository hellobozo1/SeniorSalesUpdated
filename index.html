<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cashier System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* CSS styles remain largely the same */
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      margin: 0;
      flex-direction: column;
    }

    .container {
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 24px;
      max-width: 800px;
      width: 100%;
      margin-bottom: 20px;
    }

    .item-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .item-box {
      background-color: #f0f0f0;
      border-radius: 15px;
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 45%;
      position: relative;
      flex-wrap: wrap;
    }

    .item-box button {
      background-color: #e0e0e0;
      border: none;
      border-radius: 50%;
      color: #333333;
      cursor: pointer;
      font-size: 24px;
      height: 40px;
      line-height: 40px;
      text-align: center;
      transition: background-color 0.3s ease;
      width: 40px;
    }

    .item-box button:hover {
      background-color: #d0d0d0;
    }

    .item-box input {
      background-color: transparent;
      border: none;
      color: #333333;
      font-size: 24px;
      margin: 0 16px;
      text-align: center;
      width: 65px;
    }

    .order-button-container {
      display: flex;
      justify-content: center;
      margin-top: 24px;
    }

    .order-button {
      background-color: #4caf50;
      border: none;
      border-radius: 4px;
      color: #ffffff;
      cursor: pointer;
      font-size: 16px;
      padding: 12px 24px;
      transition: background-color 0.3s ease;
    }

    .order-button:hover {
      background-color: #45a049;
    }

    .total-box {
      background-color: #f0f0f0;
      border-radius: 5px;
      margin-top: 24px;
      padding: 16px;
    }

    .total-box p {
      font-size: 18px;
      margin: 0;
    }

    table {
      border-collapse: collapse;
      margin-top: 24px;
      width: 100%;
    }

    th, td {
      border: 1px solid #dddddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f0f0f0;
    }

    .item-image {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 50%;
      margin: 0 10px;
    }

    .item-box span {
      margin-left: 10px;
    }

    /* Adjusted Toppings Toggle Buttons (Now Removed) */
    /* Since we're separating KDD Ice Cream into two items, we can remove toppings toggle styles */

    /* Optional: Adjust styles for the new KDD Ice Cream with and without toppings if needed */
  </style>
</head>
<body>
  <div class="container">
    <!-- First Row -->
    <div class="item-row">
      <div class="item-box">
        <button id="decrementAwarGalb">-</button>
        <input type="number" id="awarGalbQuantity" value="0" min="0" readonly>
        <button id="incrementAwarGalb">+</button>
        <img src="https://images.deliveryhero.io/image/hungerstation/product/image_url_ref/5dc598d07cc66473b69683d700f26b87.jpg?width=1440&quality=75" alt="Awar Galb" class="item-image" id="awarGalbImage">
        <span>Awar Galb</span>
      </div>
      <div class="item-box">
        <button id="decrementSausageKraft">-</button>
        <input type="number" id="sausageKraftQuantity" value="0" min="0" readonly>
        <button id="incrementSausageKraft">+</button>
        <img src="https://tryloops3bucket.s3.me-south-1.amazonaws.com/productImages/11392/16567102092907854.webp" alt="Sausage and Kraft Cheese" class="item-image" id="sausageKraftImage">
        <span>Sausage and Kraft Cheese</span>
      </div>
    </div>
    <!-- Second Row -->
    <div class="item-row">
      <div class="item-box">
        <button id="decrementNutella">-</button>
        <input type="number" id="nutellaQuantity" value="0" min="0" readonly>
        <button id="incrementNutella">+</button>
        <img src="https://images.deliveryhero.io/image/hungerstation/menus/menuitem/hsimg-17163958?width=1440&quality=75" alt="Nutella" class="item-image" id="nutellaImage">
        <span>Nutella</span>
      </div>
      <div class="item-box">
        <button id="decrementZaatar">-</button>
        <input type="number" id="zaatarQuantity" value="0" min="0" readonly>
        <button id="incrementZaatar">+</button>
        <img src="https://www.alphafoodie.com/wp-content/uploads/2021/03/Manakish-Zaatar-1-of-1.jpeg" alt="Za'atar" class="item-image" id="zaatarImage">
        <span>Za'atar</span>
      </div>
    </div>
    <!-- Third Row -->
    <div class="item-row">
      <div class="item-box">
        <button id="decrementChickenRashid">-</button>
        <input type="number" id="chickenRashidQuantity" value="0" min="0" readonly>
        <button id="incrementChickenRashid">+</button>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQuI0Ts082na4TsfA8b_7BtxKvICoc9vnIPZA&s" alt="Chicken Rashid" class="item-image" id="chickenRashidImage">
        <span>Chicken Rashid</span>
      </div>
      <div class="item-box">
        <button id="decrementLemonade">-</button>
        <input type="number" id="lemonadeQuantity" value="0" min="0" readonly>
        <button id="incrementLemonade">+</button>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS-gd8HHKpWmaj7hFpSPorlnUL4HGnaZAl5ww&s" alt="Lemonade" class="item-image" id="lemonadeImage">
        <span>Lemonade</span>
      </div>
    </div>
    <!-- Fourth Row -->
    <div class="item-row">
      <!-- KDD Ice Cream Without Toppings -->
      <div class="item-box">
        <button id="decrementKDDIceCreamNo">-</button>
        <input type="number" id="kddIceCreamNoQuantity" value="0" min="0" readonly>
        <button id="incrementKDDIceCreamNo">+</button>
        <img src="https://eshop.kddc.com/image/cache/catalog/ic_mc-250x250.jpg" alt="KDD Ice Cream Without Toppings" class="item-image" id="kddIceCreamNoImage">
        <span>KDD Ice Cream (No Toppings)</span>
      </div>
      <!-- KDD Ice Cream With Toppings -->
      <div class="item-box">
        <button id="decrementKDDIceCreamYes">-</button>
        <input type="number" id="kddIceCreamYesQuantity" value="0" min="0" readonly>
        <button id="incrementKDDIceCreamYes">+</button>
        <img src="https://eshop.kddc.com/image/cache/catalog/ic_mc-250x250.jpg" alt="KDD Ice Cream With Toppings" class="item-image" id="kddIceCreamYesImage">
        <span>KDD Ice Cream (With Toppings)</span>
      </div>
    </div>
    <!-- Fifth Row -->
    <div class="item-row">
      <div class="item-box">
        <button id="decrementHashbrown">-</button>
        <input type="number" id="hashbrownQuantity" value="0" min="0" readonly>
        <button id="incrementHashbrown">+</button>
        <img src="https://s7d1.scene7.com/is/image/mcdonalds/mcdonalds-Hash-Brown-New:1-3-product-tile-desktop?wid=829&hei=515&dpr=off" alt="Hashbrown" class="item-image" id="hashbrownImage">
        <span>Hashbrown</span>
      </div>
      <!-- You can add another item here if needed -->
    </div>

    <div class="order-button-container">
      <button class="order-button" id="placeOrder">Place Order</button>
    </div>
    <div class="total-box">
      <p>Total: <span id="totalAmount">0.000</span> KD</p>
    </div>
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Quantity</th>
          <th>Total Amount Purchased</th>
          <th>Total Money Spent on All Orders</th>
        </tr>
      </thead>
      <tbody id="orderSummary">
        <tr>
          <td>Awar Galb</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Sausage and Kraft Cheese</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Nutella</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Za'atar</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Chicken Rashid</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Lemonade</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>KDD Ice Cream (No Toppings)</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>KDD Ice Cream (With Toppings)</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <td>Hashbrown</td>
          <td>0</td>
          <td>0</td>
          <td>0.000</td>
        </tr>
        <tr>
          <th>Total</th>
          <th>0</th>
          <th>0</th>
          <th id="totalMoneySpent">0.000</th>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Removed Full Sales Container -->
  <!-- Removed Full Sales Button -->

  <script>
    // Define the current version of the app
    const appVersion = '2.1.0'; // Incremented version number

    // Function to check version and clear localStorage if needed
    function checkAndClearLocalStorage() {
      const storedVersion = localStorage.getItem('appVersion');
      if (storedVersion !== appVersion) {
        // Clear the specific localStorage items used by the app
        localStorage.removeItem('cashierData'); // Remove the 'cashierData' key

        // Update the stored version to the current version
        localStorage.setItem('appVersion', appVersion);
      }
    }

    // Invoke the version check on page load
    checkAndClearLocalStorage();

    // Get quantity inputs
    const awarGalbQuantity = document.getElementById('awarGalbQuantity');
    const sausageKraftQuantity = document.getElementById('sausageKraftQuantity');
    const nutellaQuantity = document.getElementById('nutellaQuantity');
    const zaatarQuantity = document.getElementById('zaatarQuantity');
    const chickenRashidQuantity = document.getElementById('chickenRashidQuantity');
    const lemonadeQuantity = document.getElementById('lemonadeQuantity');
    const kddIceCreamNoQuantity = document.getElementById('kddIceCreamNoQuantity');
    const kddIceCreamYesQuantity = document.getElementById('kddIceCreamYesQuantity');
    const hashbrownQuantity = document.getElementById('hashbrownQuantity');

    const totalAmount = document.getElementById('totalAmount');
    const placeOrderButton = document.getElementById('placeOrder');
    const orderSummary = document.getElementById('orderSummary');
    const totalMoneySpent = document.getElementById('totalMoneySpent');
    // Removed Full Sales related variables

    // Since toppings are now separate, no need for toppingsYesButton and toppingsNoButton
    // let kddIceCreamToppings = false; // Removed

    const prices = {
      'Awar Galb': 0.750,
      'Sausage and Kraft Cheese': 0.750,
      'Nutella': 0.750,
      'Za\'atar': 0.500,
      'Chicken Rashid': 0.750,
      'Lemonade': 0.500,
      'KDD Ice Cream (No Toppings)': 0.500,
      'KDD Ice Cream (With Toppings)': 0.750, // 0.500 + 0.250
      'Hashbrown': 0.750
    };

    let awarGalbTotal = 0;
    let sausageKraftTotal = 0;
    let nutellaTotal = 0;
    let zaatarTotal = 0;
    let chickenRashidTotal = 0;
    let lemonadeTotal = 0;
    let kddIceCreamNoTotal = 0;
    let kddIceCreamYesTotal = 0;
    let hashbrownTotal = 0;
    let grandTotal = 0;

    function updateTotal() {
      const awarGalbQuantityValue = parseInt(awarGalbQuantity.value) || 0;
      const sausageKraftQuantityValue = parseInt(sausageKraftQuantity.value) || 0;
      const nutellaQuantityValue = parseInt(nutellaQuantity.value) || 0;
      const zaatarQuantityValue = parseInt(zaatarQuantity.value) || 0;
      const chickenRashidQuantityValue = parseInt(chickenRashidQuantity.value) || 0;
      const lemonadeQuantityValue = parseInt(lemonadeQuantity.value) || 0;
      const kddIceCreamNoQuantityValue = parseInt(kddIceCreamNoQuantity.value) || 0;
      const kddIceCreamYesQuantityValue = parseInt(kddIceCreamYesQuantity.value) || 0;
      const hashbrownQuantityValue = parseInt(hashbrownQuantity.value) || 0;

      const totalCost =
        (awarGalbQuantityValue * prices['Awar Galb']) +
        (sausageKraftQuantityValue * prices['Sausage and Kraft Cheese']) +
        (nutellaQuantityValue * prices['Nutella']) +
        (zaatarQuantityValue * prices['Za\'atar']) +
        (chickenRashidQuantityValue * prices['Chicken Rashid']) +
        (lemonadeQuantityValue * prices['Lemonade']) +
        (kddIceCreamNoQuantityValue * prices['KDD Ice Cream (No Toppings)']) +
        (kddIceCreamYesQuantityValue * prices['KDD Ice Cream (With Toppings)']) +
        (hashbrownQuantityValue * prices['Hashbrown']);

      totalAmount.textContent = totalCost.toFixed(3);
    }

    function resetQuantities() {
      awarGalbQuantity.value = 0;
      sausageKraftQuantity.value = 0;
      nutellaQuantity.value = 0;
      zaatarQuantity.value = 0;
      chickenRashidQuantity.value = 0;
      lemonadeQuantity.value = 0;
      kddIceCreamNoQuantity.value = 0;
      kddIceCreamYesQuantity.value = 0;
      hashbrownQuantity.value = 0;
      updateTotal();
    }

    function updateOrderSummary() {
      const awarGalbQuantityValue = parseInt(awarGalbQuantity.value) || 0;
      const sausageKraftQuantityValue = parseInt(sausageKraftQuantity.value) || 0;
      const nutellaQuantityValue = parseInt(nutellaQuantity.value) || 0;
      const zaatarQuantityValue = parseInt(zaatarQuantity.value) || 0;
      const chickenRashidQuantityValue = parseInt(chickenRashidQuantity.value) || 0;
      const lemonadeQuantityValue = parseInt(lemonadeQuantity.value) || 0;
      const kddIceCreamNoQuantityValue = parseInt(kddIceCreamNoQuantity.value) || 0;
      const kddIceCreamYesQuantityValue = parseInt(kddIceCreamYesQuantity.value) || 0;
      const hashbrownQuantityValue = parseInt(hashbrownQuantity.value) || 0;

      const awarGalbRow = orderSummary.rows[0];
      const sausageKraftRow = orderSummary.rows[1];
      const nutellaRow = orderSummary.rows[2];
      const zaatarRow = orderSummary.rows[3];
      const chickenRashidRow = orderSummary.rows[4];
      const lemonadeRow = orderSummary.rows[5];
      const kddIceCreamNoRow = orderSummary.rows[6];
      const kddIceCreamYesRow = orderSummary.rows[7];
      const hashbrownRow = orderSummary.rows[8];
      const totalRow = orderSummary.rows[9];

      awarGalbTotal += awarGalbQuantityValue;
      sausageKraftTotal += sausageKraftQuantityValue;
      nutellaTotal += nutellaQuantityValue;
      zaatarTotal += zaatarQuantityValue;
      chickenRashidTotal += chickenRashidQuantityValue;
      lemonadeTotal += lemonadeQuantityValue;
      kddIceCreamNoTotal += kddIceCreamNoQuantityValue;
      kddIceCreamYesTotal += kddIceCreamYesQuantityValue;
      hashbrownTotal += hashbrownQuantityValue;
      grandTotal = awarGalbTotal + sausageKraftTotal + nutellaTotal + zaatarTotal + chickenRashidTotal + lemonadeTotal + kddIceCreamNoTotal + kddIceCreamYesTotal + hashbrownTotal;

      awarGalbRow.cells[1].textContent = awarGalbTotal;
      awarGalbRow.cells[2].textContent = (awarGalbTotal * prices['Awar Galb']).toFixed(3) + ' KD';

      sausageKraftRow.cells[1].textContent = sausageKraftTotal;
      sausageKraftRow.cells[2].textContent = (sausageKraftTotal * prices['Sausage and Kraft Cheese']).toFixed(3) + ' KD';

      nutellaRow.cells[1].textContent = nutellaTotal;
      nutellaRow.cells[2].textContent = (nutellaTotal * prices['Nutella']).toFixed(3) + ' KD';

      zaatarRow.cells[1].textContent = zaatarTotal;
      zaatarRow.cells[2].textContent = (zaatarTotal * prices['Za\'atar']).toFixed(3) + ' KD';

      chickenRashidRow.cells[1].textContent = chickenRashidTotal;
      chickenRashidRow.cells[2].textContent = (chickenRashidTotal * prices['Chicken Rashid']).toFixed(3) + ' KD';

      lemonadeRow.cells[1].textContent = lemonadeTotal;
      lemonadeRow.cells[2].textContent = (lemonadeTotal * prices['Lemonade']).toFixed(3) + ' KD';

      kddIceCreamNoRow.cells[1].textContent = kddIceCreamNoTotal;
      kddIceCreamNoRow.cells[2].textContent = (kddIceCreamNoTotal * prices['KDD Ice Cream (No Toppings)']).toFixed(3) + ' KD';

      kddIceCreamYesRow.cells[1].textContent = kddIceCreamYesTotal;
      kddIceCreamYesRow.cells[2].textContent = (kddIceCreamYesTotal * prices['KDD Ice Cream (With Toppings)']).toFixed(3) + ' KD';

      hashbrownRow.cells[1].textContent = hashbrownTotal;
      hashbrownRow.cells[2].textContent = (hashbrownTotal * prices['Hashbrown']).toFixed(3) + ' KD';

      totalRow.cells[1].textContent = grandTotal;
      totalRow.cells[2].textContent = grandTotal;
      totalMoneySpent.textContent = (
        (awarGalbTotal * prices['Awar Galb']) +
        (sausageKraftTotal * prices['Sausage and Kraft Cheese']) +
        (nutellaTotal * prices['Nutella']) +
        (zaatarTotal * prices['Za\'atar']) +
        (chickenRashidTotal * prices['Chicken Rashid']) +
        (lemonadeTotal * prices['Lemonade']) +
        (kddIceCreamNoTotal * prices['KDD Ice Cream (No Toppings)']) +
        (kddIceCreamYesTotal * prices['KDD Ice Cream (With Toppings)']) +
        (hashbrownTotal * prices['Hashbrown'])
      ).toFixed(3);

      saveData();
      resetQuantities();
    }

    function saveData() {
      const data = {
        awarGalbTotal,
        sausageKraftTotal,
        nutellaTotal,
        zaatarTotal,
        chickenRashidTotal,
        lemonadeTotal,
        kddIceCreamNoTotal,
        kddIceCreamYesTotal,
        hashbrownTotal,
        grandTotal,
        totalMoneySpent: totalMoneySpent.textContent
        // Removed fullSales data
      };
      localStorage.setItem('cashierData', JSON.stringify(data));
    }

    function loadData() {
      const data = JSON.parse(localStorage.getItem('cashierData'));
      if (data) {
        awarGalbTotal = data.awarGalbTotal || 0;
        sausageKraftTotal = data.sausageKraftTotal || 0;
        nutellaTotal = data.nutellaTotal || 0;
        zaatarTotal = data.zaatarTotal || 0;
        chickenRashidTotal = data.chickenRashidTotal || 0;
        lemonadeTotal = data.lemonadeTotal || 0;
        kddIceCreamNoTotal = data.kddIceCreamNoTotal || 0;
        kddIceCreamYesTotal = data.kddIceCreamYesTotal || 0;
        hashbrownTotal = data.hashbrownTotal || 0;
        grandTotal = data.grandTotal || 0;
        totalMoneySpent.textContent = data.totalMoneySpent || '0.000';

        const awarGalbRow = orderSummary.rows[0];
        const sausageKraftRow = orderSummary.rows[1];
        const nutellaRow = orderSummary.rows[2];
        const zaatarRow = orderSummary.rows[3];
        const chickenRashidRow = orderSummary.rows[4];
        const lemonadeRow = orderSummary.rows[5];
        const kddIceCreamNoRow = orderSummary.rows[6];
        const kddIceCreamYesRow = orderSummary.rows[7];
        const hashbrownRow = orderSummary.rows[8];
        const totalRow = orderSummary.rows[9];

        awarGalbRow.cells[1].textContent = awarGalbTotal;
        awarGalbRow.cells[2].textContent = (awarGalbTotal * prices['Awar Galb']).toFixed(3) + ' KD';

        sausageKraftRow.cells[1].textContent = sausageKraftTotal;
        sausageKraftRow.cells[2].textContent = (sausageKraftTotal * prices['Sausage and Kraft Cheese']).toFixed(3) + ' KD';

        nutellaRow.cells[1].textContent = nutellaTotal;
        nutellaRow.cells[2].textContent = (nutellaTotal * prices['Nutella']).toFixed(3) + ' KD';

        zaatarRow.cells[1].textContent = zaatarTotal;
        zaatarRow.cells[2].textContent = (zaatarTotal * prices['Za\'atar']).toFixed(3) + ' KD';

        chickenRashidRow.cells[1].textContent = chickenRashidTotal;
        chickenRashidRow.cells[2].textContent = (chickenRashidTotal * prices['Chicken Rashid']).toFixed(3) + ' KD';

        lemonadeRow.cells[1].textContent = lemonadeTotal;
        lemonadeRow.cells[2].textContent = (lemonadeTotal * prices['Lemonade']).toFixed(3) + ' KD';

        kddIceCreamNoRow.cells[1].textContent = kddIceCreamNoTotal;
        kddIceCreamNoRow.cells[2].textContent = (kddIceCreamNoTotal * prices['KDD Ice Cream (No Toppings)']).toFixed(3) + ' KD';

        kddIceCreamYesRow.cells[1].textContent = kddIceCreamYesTotal;
        kddIceCreamYesRow.cells[2].textContent = (kddIceCreamYesTotal * prices['KDD Ice Cream (With Toppings)']).toFixed(3) + ' KD';

        hashbrownRow.cells[1].textContent = hashbrownTotal;
        hashbrownRow.cells[2].textContent = (hashbrownTotal * prices['Hashbrown']).toFixed(3) + ' KD';

        totalRow.cells[1].textContent = grandTotal;
        totalRow.cells[2].textContent = grandTotal;
      }
    }

    // Event listeners for increment and decrement buttons

    // Helper function to add event listeners
    function addIncrementDecrementListeners(buttonIdPrefix, quantityId) {
      document.getElementById(`increment${buttonIdPrefix}`).addEventListener('click', () => {
        const quantityInput = document.getElementById(quantityId);
        quantityInput.value = parseInt(quantityInput.value) + 1;
        updateTotal();
      });

      document.getElementById(`decrement${buttonIdPrefix}`).addEventListener('click', () => {
        const quantityInput = document.getElementById(quantityId);
        if (parseInt(quantityInput.value) > 0) {
          quantityInput.value = parseInt(quantityInput.value) - 1;
          updateTotal();
        }
      });
    }

    // Adding listeners for all items
    addIncrementDecrementListeners('AwarGalb', 'awarGalbQuantity');
    addIncrementDecrementListeners('SausageKraft', 'sausageKraftQuantity');
    addIncrementDecrementListeners('Nutella', 'nutellaQuantity');
    addIncrementDecrementListeners('Zaatar', 'zaatarQuantity');
    addIncrementDecrementListeners('ChickenRashid', 'chickenRashidQuantity');
    addIncrementDecrementListeners('Lemonade', 'lemonadeQuantity');
    addIncrementDecrementListeners('KDDIceCreamNo', 'kddIceCreamNoQuantity');
    addIncrementDecrementListeners('KDDIceCreamYes', 'kddIceCreamYesQuantity');
    addIncrementDecrementListeners('Hashbrown', 'hashbrownQuantity');

    placeOrderButton.addEventListener('click', updateOrderSummary);

    // Removed Full Sales event listeners

    // Load data on page load
    window.addEventListener('load', loadData);
  </script>
</body>
</html>
